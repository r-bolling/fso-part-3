{"version":3,"sources":["components/Filter.js","components/Notification.js","components/PersonForm.js","components/Persons.js","server/persons.js","App.js","index.js"],"names":["Filter","search","handleSearch","value","onChange","Notification","message","errorMessage","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","errorStyle","style","PersonForm","formSubmit","nameValue","nameChange","numberValue","numberChange","onSubmit","type","Persons","showPersons","deletePerson","map","person","name","number","onClick","id","baseURL","axios","get","then","res","data","post","delete","newObject","put","App","useState","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setSearch","showAll","setShowAll","setMessage","setErrorMessage","useEffect","personService","console","log","personsToShow","filter","toLowerCase","includes","e","target","preventDefault","newPerson","find","p","changedPerson","returnedPerson","setTimeout","catch","error","concat","err","response","newPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.233efa98.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = ({ search, handleSearch }) => {\n  return (\n    <>\n      Search filter: <input value={search} onChange={handleSearch} />{' '}\n    </>\n  );\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst Notification = ({ message, errorMessage }) => {\n  if (message === null && errorMessage === null) {\n    return null;\n  }\n\n  const notificationStyle = {\n    color: 'green',\n    background: 'lightgray',\n    fontSize: '20px',\n    borderStyle: 'solid',\n    borderRadius: '5px',\n    padding: '10px',\n    marginBottom: '10px',\n  };\n\n  const errorStyle = { ...notificationStyle, color: 'red' };\n\n  if (message !== null) {\n    return <div style={notificationStyle}>{message}</div>;\n  }\n\n  if (errorMessage !== null) {\n    return <div style={errorStyle}>{errorMessage}</div>;\n  }\n};\n\nexport default Notification;\n","import React from 'react';\n\nconst PersonForm = ({\n  formSubmit,\n  nameValue,\n  nameChange,\n  numberValue,\n  numberChange,\n}) => {\n  return (\n    <>\n      <form onSubmit={formSubmit}>\n        <div>\n          name: <input value={nameValue} onChange={nameChange} />\n          <br />\n          number: <input value={numberValue} onChange={numberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Persons = ({ showPersons, deletePerson }) => {\n  return (\n    <>\n      {showPersons.map((person) => (\n        <p key={person.name}>\n          {person.name} - {person.number}{' '}\n          <button onClick={() => deletePerson(person.id)}>delete</button>\n        </p>\n      ))}\n    </>\n  );\n};\n\nexport default Persons;\n","import axios from 'axios';\nconst baseURL = '/api/persons';\n\nconst getAll = () => {\n  const req = axios.get(baseURL);\n  return req.then((res) => res.data);\n};\n\nconst create = (person) => {\n  const req = axios.post(baseURL, person);\n  return req.then((res) => res.data);\n};\n\nconst deleteReq = (id) => {\n  const req = axios.delete(`${baseURL}/${id}`);\n  return req.then((res) => res);\n};\n\nconst update = (id, newObject) => {\n  const req = axios.put(`${baseURL}/${id}`, newObject);\n  return req.then((res) => res.data);\n};\n\nexport default { getAll, create, deleteReq, update };\n","import React, { useState, useEffect } from 'react';\nimport Filter from './components/Filter';\nimport Notification from './components/Notification';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport personService from './server/persons';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [search, setSearch] = useState('');\n  const [showAll, setShowAll] = useState(true);\n  const [message, setMessage] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((persons) => {\n      setPersons(persons);\n      console.log('Got it!');\n    });\n  }, []);\n\n  const handleNameChange = (e) => {\n    setNewName(e.target.value);\n    console.log(e.target.value);\n  };\n\n  const addNewPerson = (e) => {\n    e.preventDefault();\n    const newPerson = { name: newName, number: newNumber };\n    const personNames = persons.map((person) => person.name);\n    if (personNames.includes(newPerson.name)) {\n      const person = persons.find((p) => p.name === newPerson.name);\n      const changedPerson = { ...person, number: newPerson.number };\n      personService\n        .update(person.id, changedPerson)\n        .then((returnedPerson) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== changedPerson.id ? person : returnedPerson\n            )\n          );\n          setMessage(`Updated ${returnedPerson.name}'s number!`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((error) => {\n          setErrorMessage(\n            `Information of ${newPerson.name} has already been removed from server`\n          );\n          setPersons(\n            persons.filter((person) => person.id !== changedPerson.id)\n          );\n          setTimeout(() => {\n            setErrorMessage(null);\n          }, 5000);\n        });\n    } else {\n      personService\n        .create(newPerson)\n        .then((person) => {\n          setPersons(persons.concat(person));\n          setMessage(`Added ${person.name}!`);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        })\n        .catch((err) => {\n          setMessage(err.response.data.error);\n          setTimeout(() => {\n            setMessage(null);\n          }, 5000);\n        });\n    }\n    // const message = `${newPerson.name} is already added to the phonebook, replace the old number with a new one?`;\n    // const personNames = persons.map((person) => person.name);\n    // if (personNames.includes(newPerson.name)) {\n    //   const result = window.confirm(message);\n    //   if (result) {\n    //     const person = persons.find((p) => p.name === newPerson.name);\n    //     const changedPerson = { ...person, number: newPerson.number };\n    //     personService\n    //       .update(person.id, changedPerson)\n    //       .then((returnedPerson) => {\n    //         setPersons(\n    //           persons.map((person) =>\n    //             person.id !== changedPerson.id ? person : returnedPerson\n    //           )\n    //         );\n    //         setMessage(`Updated ${returnedPerson.name}'s number!`);\n    //         setTimeout(() => {\n    //           setMessage(null);\n    //         }, 5000);\n    //       })\n    //       .catch((error) => {\n    //         setErrorMessage(\n    //           `Information of ${newPerson.name} has already been removed from server`\n    //         );\n    //         setPersons(\n    //           persons.filter((person) => person.id !== changedPerson.id)\n    //         );\n    //         setTimeout(() => {\n    //           setErrorMessage(null);\n    //         }, 5000);\n    //       });\n    //   }\n    // } else {\n    //   personService.create(newPerson).then((person) => {\n    //     setPersons(persons.concat(person));\n    //     setMessage(`Added ${person.name}!`);\n    //     setTimeout(() => {\n    //       setMessage(null);\n    //     }, 5000);\n    //   });\n    // }\n    setNewName('');\n    setNewNumber('');\n  };\n\n  const handleNumberChange = (e) => {\n    setNewNumber(e.target.value);\n    console.log(newNumber);\n  };\n\n  const handleSearch = (e) => {\n    if (search !== '') {\n      setShowAll(false);\n    } else {\n      setShowAll(true);\n    }\n    setSearch(e.target.value);\n  };\n\n  const deletePerson = (id) => {\n    console.log(`${id} should be deleted!`);\n    personService.deleteReq(id).then((res) => {\n      const newPersons = persons.filter((person) => person.id !== id);\n      setPersons(newPersons);\n      console.log('success!');\n    });\n  };\n\n  const personsToShow = showAll\n    ? persons\n    : persons.filter((person) =>\n        person.name.toLowerCase().includes(search.toLowerCase())\n      );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} errorMessage={errorMessage} />\n      <Filter search={search} handleSearch={handleSearch} />\n      <h2>Add New</h2>\n      <PersonForm\n        formSubmit={addNewPerson}\n        nameValue={newName}\n        nameChange={handleNameChange}\n        numberValue={newNumber}\n        numberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons showPersons={personsToShow} deletePerson={deletePerson} />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}